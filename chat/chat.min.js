document.addEventListener("DOMContentLoaded",()=>{function t(t,e=0){return e?Math.floor(t-t/100*e):parseInt(t)}function e(t,e=0,a=1){return e?(Math.floor(t-t/100*e)*a).toLocaleString():(parseInt(t)*a).toLocaleString()}async function a(t,e,a){if(a.classList.contains("blocked"))return!1;a.classList.add("blocked"),a.innerText="Отправка...";let n=await fetch(e,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:JSON.stringify(t)}),s=await n;return s.ok?(a.innerText="Успешно!",setTimeout(()=>{a.innerText="Отправить!",a.classList.remove("blocked")},5e3),ym(95872157,"reachGoal","send_form"),"Успешно"):s.ok?void 0:(a.innerText="Ошибка!","Ошибка")}fetch("/php/chat_products_from_db.php",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"get_data=1"}).then(t=>t.ok?t.ok?t.text():void 0:"Ошибка").then(n=>"Ошибка"!=n&&(!!JSON.parse(n).length&&void function(n){let s=[];n.forEach(t=>{!s.includes(t.brand)&&s.push(t.brand)}),document.body.insertAdjacentHTML("beforeend",'\n\t\t<div class = "chat-closed"></div>\n\t\t<div class = "dialog">\n\t\t\t<p class = "ask-manager">Консультант</p>\n\t\t\t<div class="chat-close"></div>\n\t\t\t<div class = "dialog-wrapper"></div>\n\t\t</div>');const r=document.querySelector(".dialog"),c=document.querySelector(".dialog-wrapper"),l=document.querySelector(".chat-closed");function o(t,e){window.screen.width<480&&function(){let t=document.body;if(!t.classList.contains("scroll-locked")){let e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;document.querySelector(".nav").classList.contains("nav-static")&&document.querySelector(".nav").classList.add("nav-static-temporary"),t.classList.add("scroll-locked"),t.style.top="-"+e+"px",t.setAttribute("data-popup-scrolltop",e)}}(),e.style.display="none",t.style.display="block"}function i(){c.innerHTML="",c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t\t<p class = "chat-down-p">Рады приветствовать вас!</p>\n\t\t\t\t\t<p class = "chat-down-p">Мы собрали для вас лучший кофе в зернах и готовы предложить что-нибудь интересное!</p>\n\t\t\t\t\t<p>Ищете что-то конкретное?</p>\n\n\t\t\t\t\t<div class = "step-manager-btns">\n\t\t\t\t\t\t<a class = "step-manager-btn start-talk-ok">Знаю что хочу</a>\n\t\t\t\t\t\t<a class = "step-manager-btn start-talk-no">Что у вас есть?</a>\n\t\t\t\t\t</div>\n\t\t\t${h()}\n\t\t`)}function d(){c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t<p class = "chat-down-p">Сегодня у нас представлены такие бренды:</p>\n\t\t\t\t<div class = "brands-assortiment"></div>\n\t\t\t${h()}\n\t\t`);let t=0;s.length&&t<=s.length&&setTimeout(()=>{const e=setInterval(function(){document.querySelector(".brands-assortiment").insertAdjacentHTML("beforeend",`<a class = "step-manager-btn-around">${s[t]}</a>`),f(document.querySelectorAll(".manager-phrase")),++t>=s.length&&(clearInterval(e),document.querySelector(".brands-assortiment").insertAdjacentHTML("beforeend",'<p class = "chat-up-p">Какой вас интересует?</p>'),f(document.querySelectorAll(".manager-phrase")))},150)},150)}function p(){c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t<p class = "step-manager-adress-text">Мы готовы ответить на все ваши вопросы любым удобным способом.</p>\n\t\t\t\t<div class = "we-are-in-messengers">\n\t\t\t\t\t<span class = "step-manager-title">В мессенджерах:</span>\n\t\t\t\t\t<p class = "messengers-items">\n\t\t\t\t\t\t<a href = "" class = "messengers-item-link telegram">Telegram</a>\n\t\t\t\t\t\t<a href = "" class = "messengers-item-link whatsapp">Whatsapp</a>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<p class = "step-manager-phone-w">\n\t\t\t\t\t<span>Телефон: </span>\n\t\t\t\t\t<a href = "tel:+70000000000" class = "step-manager-phone-link">+7 (999) 000-00-00</a>\n\t\t\t\t</p>\n\t\t\t\t<p class = "step-manager-email-w">\n\t\t\t\t\t<span>Email: <span>\n\t\t\t\t\t<a href = "mailto:mail@bluebeans.ru" class = "step-manager-email-link">mail@bluebeans.ru</a>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span>Или <a class = "send-request-in-chat">оставить заявку</a> в чате и мы перезвоним вам.</span>\n\t\t\t\t</p>\n\t\t\t${h()}\n\t\t`),f(document.querySelectorAll(".manager-phrase"))}function m(){if(document.querySelector(".step-manager-inputs"))return!1;c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t<p class = "step-manager-adress-text">Мы свяжемся с вами по номеру, который вы укажете ниже.</p>\n\t\t\t\t<div class = "step-manager-inputs">\n\t\t\t\t\t<label class = "step-manager-label">\n\t\t\t\t\t\t<p class = "step-manager-p bold-text-600">Ваше имя (по желанию):</p>\n\t\t\t\t\t\t<input type = "text" name = "name" class = "step-manager-input step-manager-name" placeholder = "Имя">\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class = "step-manager-label">\n\t\t\t\t\t\t<p class = "step-manager-label-p bold-text-600">Ваш телефон:</p>\n\t\t\t\t\t\t<input type = "text" name = "phone" class = "step-manager-input step-manager-phone" placeholder = "+7 (___) ___-__-__">\n\t\t\t\t\t</label>\n\t\t\t\t\t<p class = "step-manager-label-p bold-text-600">Текст:</p>\n\t\t\t\t\t<textarea name = "textarea" class = "step-manager-textarea-request"></textarea>\n\t\t\t\t\t<div class = "chat-agree-block">\n\t\t\t\t\t\t<p class = "chat-agree-text">* Нажимая на кнопку "Отправить", Вы даете согласие на обработку персональных данных</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class = "submit-btns">\n\t\t\t\t\t\t<a class = "chat-ready-request chat-ready-send-callme">Отправить</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t${h()}\n\t\t`),b(document.querySelector(".step-manager-phone"))}function u(){return'<div class = "manager-phrase">\n\t\t\t<div class = "manager-img"></div>\n\t\t\t<div class = "manager-text">'}function g(){return'<div class = "manager-phrase">\n\t\t\t<div class = "manager-img"></div>\n\t\t\t<div class = "manager-text manager-text-fullwidth">'}function h(){return"</div></div>"}function v(t){let e=0;document.querySelectorAll(".manager-phrase").forEach(a=>{e?a.remove():a.contains(t)&&(e=1)})}function b(t){let e=new Inputmask("+7 (999) 999-99-99");e.mask(t),t.addEventListener("keyup",()=>{event.target.style.border="1px solid rgb(199, 199, 199)"}),t.addEventListener("focus",()=>{event.target.style.border="1px solid rgb(199, 199, 199)"})}function y(t){t.parentElement.querySelectorAll(".step-manager-btn").forEach(t=>{t.classList.remove("active")}),t.classList.add("active")}function f(t,e="start"){t[t.length-1].scrollIntoView({behavior:"smooth",block:e})}document.querySelector(".chat-closed").addEventListener("click",()=>{o(r,l),i()}),document.querySelector(".chat-close").addEventListener("click",()=>{!function(t,e){window.screen.width<480&&function(){let t=document.body;if(t.classList.contains("scroll-locked")){let e=document.body.getAttribute("data-popup-scrolltop");document.querySelector(".nav").classList.contains("nav-static-temporary")&&document.querySelector(".nav").classList.remove("nav-static-temporary"),t.classList.remove("scroll-locked"),t.style.top="",t.removeAttribute("data-popup-scrolltop"),window.scrollTo(0,e)}}(),t.style.display="none",e.style.display="block"}(r,l)}),window.screen.width>480&&setTimeout(()=>{o(r,l),i()},5e3),document.querySelectorAll(".top-contact-link-chat").forEach(t=>{t.addEventListener("click",()=>{c.innerHTML="",o(r,l),m(),f(document.querySelectorAll(".manager-phrase"))})}),document.querySelectorAll(".one-click-order").forEach(a=>{a.addEventListener("click",()=>{o(r,l);let a=event.target.parentElement.parentElement;!function(a,n,s,r,l,o){c.innerHTML="",c.insertAdjacentHTML("beforeend",`${u()}\n\t\t\t\t<span>Добрый день! Ваш выбор:</span>\n\t\t${h()}\n\t\t${g()}\n\t\t\t\t<img src = "${s}" class = "step-order-pic">\n\t\t\t\t<p class = "step-order-title" data-id = "${a}">${r}</p>\n\t\t\t\t<p class = "step-order-num">\n\t\t\t\t\t<span>Количество: </span>\n\t\t\t\t\t<a class = "step-order-num-a bold-text-600" data-default-value = ${l}>${l} шт.</a>\n\t\t\t\t\t<a class = "step-order-select step-order-minus"></a>\n\t\t\t\t\t<a class = "step-order-select step-order-plus"></a>\n\t\t\t\t</p>\n\t\t\t\t<p class = "step-order-price">\n\t\t\t\t\t<span>Стоимость заказа:</span> \n\t\t\t\t\t<span class = "order-price-val bold-text-600" data-default-value = ${t(o)}>${e(o)} ₽</span>\n\t\t\t\t</p>\n\t\t${h()}\n\t\t${g()}\n\t\t\t\t<span>Все верно?</span>\n\t\t\t\t<div class = "step-manager-btns">\n\t\t\t\t\t<a class = "step-manager-btn fast-order-ok">Все верно</a>\n\t\t\t\t\t<a class = "step-manager-btn fast-order-no">Есть вопросы</a>\n\t\t\t\t</div>\n\t\t${h()}\n\t\t`)}(a.getAttribute("data-id"),a.getAttribute("data-weight"),a.querySelector("img").getAttribute("src"),a.querySelector(".item-title-text").innerText,a.querySelector(".item-amount-value").value,a.getAttribute("data-price"));try{ym(95872157,"reachGoal","one_click_order")}catch(t){}})}),document.body.addEventListener("click",()=>{let s,r,l=1;if(event.target.classList.contains("step-order-select")){if(s=event.target.parentElement.querySelector(".step-order-num-a"),r=event.target.parentElement.parentElement.querySelector(".order-price-val"),event.target.classList.contains("step-order-minus")){if(parseInt(s.innerText)<=1)return!1;l=parseInt(s.innerText)-1,s.innerText=l+" шт.",r.innerText=(parseInt(r.getAttribute("data-default-value"))*l).toLocaleString("ru")+" ₽"}if(event.target.classList.contains("step-order-plus")){if(parseInt(s.innerText)>=99)return!1;l=parseInt(s.innerText)+1,s.innerText=l+" шт.",r.innerText=(parseInt(r.getAttribute("data-default-value"))*l).toLocaleString("ru")+" ₽"}}if(event.target.classList.contains("fast-order-ok")&&(y(event.target),v(event.target),c.insertAdjacentHTML("beforeend",`${u()}\n\t\t\t<span>Отлично! Вам удобнее оплатить заказ сейчас на сайте или при получении товара?<br>\n\t\t\tМы принимаем оплату любым удобным способом.</span>\n\t\t\t<div class = "step-manager-btns payment-time">\n\t\t\t\t<a class = "step-manager-btn fast-order-now">Сейчас</a>\n\t\t\t\t<a class = "step-manager-btn fast-order-after">При получении</a>\n\t\t\t</div>\n\t\t${h()}\n\t\t`),f(document.querySelectorAll(".manager-phrase"))),event.target.classList.contains("fast-order-no")&&(y(event.target),v(event.target),p(),f(document.querySelectorAll(".manager-phrase"))),event.target.classList.contains("start-talk-ok")&&(y(event.target),v(event.target),d()),event.target.classList.contains("start-talk-no")&&(y(event.target),v(event.target),c.insertAdjacentHTML("beforeend",`\n\t\t\t${g()}\n\t\t\t\t\t<p class="chat-down-p">В нашем ассортименте несколько десятков видов. Мы поможем вам определиться с выбором!</p>\n\t\t\t\t\t<p class="chat-down-p">\n\t\t\t\t\t\tМногие кофеманы выбирают продукцию любимого проверенного бренда.\n\t\t\t\t\t\tА кто-то любит пробовать разные вкусы в зависимости от настроения.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Как выбираете кофе вы?</p>\n\t\t\t\t\t<div class = "step-manager-btns">\n\t\t\t\t\t\t<a class = "step-manager-btn consult-order-ok">Какие есть бренды?</a>\n\t\t\t\t\t\t<a class = "step-manager-btn consult-order-no">Какие есть вкусы?</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class = "step-manager-btns">\n\t\t\t\t\t\t<a class = "step-manager-btn consult-order-discuss">Хочу получить консультацию в чате или по телефону</a>\n\t\t\t\t\t</div>\n\t\t\t${h()}\n\t\t`),f(document.querySelectorAll(".manager-phrase"))),event.target.classList.contains("consult-order-ok")&&(y(event.target),v(event.target),d()),event.target.classList.contains("consult-order-no")&&(y(event.target),v(event.target),function(t){c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t\t<p class = "chat-down-p">Какой вкус предпочитаете?</p>\n\t\t\t\t\t<div class = "tastes-assortiment"></div>\n\t\t\t${h()}\n\t\t`);let e=[];n.forEach(t=>{e.includes(t.chat_tastes)||e.push(t.chat_tastes)});let a=0;e.length&&a<=e.length&&setTimeout(()=>{const t=setInterval(function(){document.querySelector(".tastes-assortiment").insertAdjacentHTML("beforeend",`<a class = "step-manager-btn-taste">${e[a]}</a>`),f(document.querySelectorAll(".manager-phrase")),++a>=e.length&&(clearInterval(t),f(document.querySelectorAll(".manager-phrase")))},150)},150)}()),event.target.classList.contains("consult-order-discuss")&&(event.target.parentElement.querySelectorAll(".step-manager-btn").forEach(t=>{t.classList.remove("active")}),event.target.classList.add("active"),v(event.target),p()),event.target.classList.contains("step-manager-btn-around")&&(document.querySelectorAll(".step-manager-btn-around").forEach(t=>{t.classList.remove("active")}),event.target.classList.add("active"),v(event.target),function(t){document.querySelector(".chat-assortiment-items")||c.insertAdjacentHTML("beforeend",`\n\t\t\t\t${u()}\n\t\t\t\t\t<p class = "chat-down-p">Вот что у нас сегодня есть из <b>${t.innerText}</b>:</p>\n\t\t\t\t\t<div class = "chat-assortiment-items"></div>\n\t\t\t\t${h()}\n\t\t\t`),f(document.querySelectorAll(".manager-phrase"));let a=[];n.forEach(e=>{e.brand==t.innerText&&a.push(e)});let s=0;a.length&&s<=a.length&&(document.querySelector(".chat-assortiment-items").innerHTML="",setTimeout(()=>{let t=setInterval(function(){document.querySelector(".chat-assortiment-items").insertAdjacentHTML("beforeend",`\n\t\t\t\t\t<div class = "chat-assortiment-item" data-id = "${a[s].id}">\n\t\t\t\t\t    <div class = "chat-assortiment-item-w"></div>\n\t\t\t\t\t\t<img src="/images/catalog/brands/${a[s].id}/1_s.png" class = "chat-assortiment-pic">\n\t\t\t\t\t\t<p class = "chat-assortiment-text">${a[s].brand} ${a[s].name}, ${a[s].weight}</p>\n\t\t\t\t\t\t<p class = "chat-assortiment-text-pr">${e(a[s].price,a[s].sale)} ₽</p>\n\t\t\t\t\t\t<a class = "chat-assortiment-link">Заказать</a>\n\t\t\t\t\t</div>`),++s>=a.length&&(clearInterval(t),f(document.querySelectorAll(".manager-phrase")))},150)},150))}(event.target)),event.target.classList.contains("step-manager-btn-taste")&&(document.querySelectorAll(".step-manager-btn-taste").forEach(t=>{t.classList.remove("active")}),event.target.classList.add("active"),function(t){document.querySelector(".chat-tastes-items")||c.insertAdjacentHTML("beforeend",`\n\t\t\t\t${u()}\n\t\t\t\t\t<p class = "chat-down-p">Ваш любимый вкус ${t.innerText}. Вот что у нас есть для вас:</p>\n\t\t\t\t\t<div class = "chat-tastes-items"></div>\n\t\t\t\t${h()}\n\t\t\t`),document.querySelector(".chat-tastes-items").parentElement.querySelector(".chat-down-p").innerHTML=`Ваш любимый вкус ${t.innerText}. Вот что у нас есть для вас:`,f(document.querySelectorAll(".manager-phrase"));let a=[];n.forEach(e=>{e.chat_tastes==t.innerText&&a.push(e)});let s=0;if(a.length&&s<=a.length){document.querySelector(".chat-tastes-items").innerHTML="";let t=setInterval(function(){document.querySelector(".chat-tastes-items").insertAdjacentHTML("beforeend",`\n\t\t\t\t<div class = "chat-assortiment-item" data-id = "${a[s].id}">\n\t\t\t\t    <div class = "chat-assortiment-item-w"></div>\n\t\t\t\t\t<img src="/images/catalog/brands/${a[s].id}/1_s.png" class = "chat-assortiment-pic">\n\t\t\t\t\t<p class = "chat-assortiment-text">${a[s].brand} ${a[s].name}, ${a[s].weight}</p>\n\t\t\t\t\t<p class = "chat-assortiment-text-pr">${e(a[s].price,a[s].sale)} ₽</p>\n\t\t\t\t\t<a class = "chat-assortiment-link">Заказать</a>\n\t\t\t\t</div>`),f(document.querySelectorAll(".manager-phrase")),++s>=a.length&&(clearInterval(t),f(document.querySelectorAll(".manager-phrase")))},200)}}(event.target)),event.target.classList.contains("chat-assortiment-item-w")&&(v(event.target),function(a){let s;for(let t=0;t<n.length;t++)n[t].id==a.parentElement.getAttribute("data-id")&&(s=n[t]);c.insertAdjacentHTML("beforeend",`\n\t\t\t${g()}\n\t\t\t\t\t<p class = "chat-down-p">Ваш выбор:</p>\n\t\t\t\t\t<img src = "/images/catalog/brands/${s.id}/1_s.png" class = "step-order-pic">\n\t\t\t\t\t<p class = "step-order-title" data-id = "${s.id}">${s.brand} ${s.name}, ${s.weight}</p>\n\t\t\t\t\t<p class = "step-order-num">\n\t\t\t\t\t\t<span>Количество: </span>\n\t\t\t\t\t\t<a class = "step-order-num-a bold-text-600" data-default-value = "1">1 шт.</a>\n\t\t\t\t\t\t<a class = "step-order-select step-order-minus"></a>\n\t\t\t\t\t\t<a class = "step-order-select step-order-plus"></a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class = "step-order-price">\n\t\t\t\t\t\t<span>Стоимость заказа:</span> \n\t\t\t\t\t\t<span class = "order-price-val bold-text-600" data-default-value = ${t(s.price,s.sale)}>${e(s.price,s.sale)} ₽</span>\n\t\t\t\t\t</p>\n\t\t\t${h()}\n\t\t`),f(document.querySelectorAll(".manager-phrase")),c.insertAdjacentHTML("beforeend",`\t${g()}\n\t\t\t\t<span>Все верно?</span>\n\t\t\t\t<div class = "step-manager-btns">\n\t\t\t\t\t<a class = "step-manager-btn fast-order-ok">Все верно</a>\n\t\t\t\t\t<a class = "step-manager-btn fast-order-no">Есть вопросы</a>\n\t\t\t\t</div>\n\t\t\t${h()}\n\t\t`)}(event.target)),event.target.classList.contains("fast-order-after")||event.target.classList.contains("fast-order-now")){y(event.target);let t="";document.querySelectorAll(".chat-contact-label input").forEach(e=>{if(e.checked)return t=e.parentElement.innerText,!1}),function(t){if(document.querySelector(".chat-ready-send"))return!1;c.insertAdjacentHTML("beforeend",`${u()}\n\t\t\t<p class = "step-manager-adress-text">Для подтверждения заказа необходимы ваши контактные данные.\n\t\t\t<br>В следующем шаге перейдем к доставке.</p>\n\t\t\t<div class = "step-manager-inputs">\n\t\t\t\t<label class = "step-manager-label">\n\t\t\t\t\t<p class = "step-manager-label-p bold-text-600">Ваше имя (по желанию):</p>\n\t\t\t\t\t<input type = "text" name = "name" class = "step-manager-input step-manager-name" placeholder = "Имя">\n\t\t\t\t</label>\n\t\t\t\t<label class = "step-manager-label">\n\t\t\t\t\t<p class = "step-manager-label-p bold-text-600">Ваш телефон:</p>\n\t\t\t\t\t<input type = "text" name = "phone" class = "step-manager-input step-manager-phone" placeholder = "+7 (___) ___-__-__">\n\t\t\t\t</label>\n\t\t\t\t${"Email"==t?'\n\t\t\t\t\t<label class = "step-manager-label">\n\t\t\t\t\t\t<p class = "step-manager-label-p bold-text-600">Ваш email:</p>\n\t\t\t\t\t\t<input type = "text" name = "name" class = "step-manager-input step-manager-email" placeholder = "Ваш email">\n\t\t\t\t\t</label>':""}\n\t\t\t\t<div class = "chat-agree-block">\n\t\t\t\t\t<p class = "chat-agree-text">* Нажимая на кнопку "Отправить", Вы даете согласие на обработку персональных данных</p>\n\t\t\t\t</div>\n\t\t\t\t<div class = "submit-btns">\n\t\t\t\t\t<a class = "chat-ready chat-ready-send">\n\t\t\t\t\t\t${document.querySelector(".fast-order-now").classList.contains("active"),"Отправить"}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t${h()}\n\t\t`),b(document.querySelector(".step-manager-phone"))}(t),f(document.querySelectorAll(".manager-phrase"))}if(event.target.classList.contains("chat-ready-adress")){if(""==document.querySelector(".step-manager-textarea").value)return document.querySelector(".step-manager-textarea").style.border="1px solid red",!1;if(!document.querySelector(".step-manager-phone").inputmask.isComplete())return document.querySelector(".step-manager-phone").style.border="1px solid red",!1;event.target.classList.add("active");let t="",e=event.target;document.querySelectorAll(".chat-contact-label input").forEach(e=>{if(e.checked)return t=e.parentElement.innerText,!1});let n=document.querySelector(".dialog"),s={product_name:n.querySelector(".step-order-title").innerText,amount:parseInt(n.querySelector(".step-order-num-a").innerText),default_price:n.querySelector(".order-price-val").getAttribute("data-default-value"),get price(){return this.amount*this.default_price},when_pay:n.querySelector(".payment-time .active").innerText,client_name:n.querySelector(".step-manager-name").value,client_phone:n.querySelector(".step-manager-phone").value,adress:n.querySelector(".step-manager-textarea").value,confirmation:n.querySelector('.chat-radio-btns input[type="radio"]:checked').parentElement.querySelector("span").innerText,id:n.querySelector(".step-order-title").getAttribute("data-id")};a(s,"/libs/send-chat.php",e).then(e=>{!function(t,e,a){c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t<p class = "step-manager-adress-text">Спасибо! Мы получили ваш заказ.</p>\n\t\t\t\t${"Telegram"==a?'<p class = "step-manager-adress-text">В ближайшее время пришлем вам подтверждение в Telegram!</p>':""}\n\t\t\t\t${"Звонок"==a?'<p class = "step-manager-adress-text">В ближайшее время перезвоним вам и подтвердим информацию!</p>':""}\n\t\t\t\t${"Whatsapp"==a?'<p class = "step-manager-adress-text">В ближайшее время пришлем вам подтверждение в Whatsapp!</p>':""}\n\t\t\t\t${"Email"==a?'<p class = "step-manager-adress-text">В ближайшее время пришлем вам подтверждение на Email!</p>':""}\n\t\t\t${h()}\n\t\t`)}(0,0,t),f(document.querySelectorAll(".manager-phrase"))})}if(event.target.classList.contains("chat-ready-send")){if(!document.querySelector(".step-manager-phone").inputmask.isComplete())return document.querySelector(".step-manager-phone").style.border="1px solid red",!1;let t=document.querySelector(".dialog"),e=event.target,n={product_name:t.querySelector(".step-order-title").innerText,amount:parseInt(t.querySelector(".step-order-num-a").innerText),default_price:t.querySelector(".order-price-val").getAttribute("data-default-value"),get price(){return this.amount*this.default_price},when_pay:t.querySelector(".payment-time .active").innerText,client_name:t.querySelector(".step-manager-name").value,client_phone:t.querySelector(".step-manager-phone").value,adress:"Временно не работает",confirmation:"Временно не работает",id:t.querySelector(".step-order-title").getAttribute("data-id")};a(n,"/libs/send-chat.php",e).then(t=>(e.innerText="Ошибка!",!1))}event.target.classList.contains("chat-ready-send-callme")&&(y(event.target),function(){if(!document.querySelector(".step-manager-phone").inputmask.isComplete())return document.querySelector(".step-manager-phone").style.border="1px solid red",!1;c.insertAdjacentHTML("beforeend",`\n\t\t\t${u()}\n\t\t\t\t<p>Спасибо за вашу заявку. Мы обработаем ее и перезвоним.</p>\n\t\t\t${h()}\n\t\t`),b(document.querySelector(".step-manager-phone"))}(event.target),f(document.querySelectorAll(".manager-phrase"))),event.target.classList.contains("send-request-in-chat")&&(m(),f(document.querySelectorAll(".manager-phrase")))})}(JSON.parse(n))))});