export function getFinalPrice(e,t=0){return t?Math.floor(e-e/100*t):parseInt(e)};export function getFinalPriceDecorated(e,t=0,r=1){return t?(Math.floor(e-e/100*t)*r).toLocaleString():(parseInt(e)*r).toLocaleString()};export function countProductsAmount(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].amount;return t};export function returnCorrectWord(e){return 0==(e=e.toString())&&(e=" товаров"),e<20&&1==e.slice(-2)&&(e=" товар"),e<20&&e.slice(-2)>=2&&e.slice(-2)<=4&&(e=" товара"),e<=20&&e.slice(-2)>4&&e.slice(-2)<=20&&(e=" товаров"),e>20&&1==e.slice(-1)&&(e=" товар"),e>20&&e.slice(-1)>=2&&e.slice(-1)<=4&&(e=" товара"),e>20&&e.slice(-1)>=5&&e.slice(-1)<=9&&(e=" товаров"),e>20&&0==e.slice(-1)&&(e=" товаров"),e};export function countFinalSumm(e){let t=0;return e.forEach(e=>{t+=getFinalPrice(e.price,e.sale)*e.amount}),t};export function emptyCartInfo(){document.querySelector(".cart-preloader")&&document.querySelector(".cart-preloader").remove(),document.querySelector(".cart-wrapper")&&document.querySelector(".cart-wrapper").remove(),document.querySelector(".cart-final")&&document.querySelector(".cart-final").remove(),document.querySelector(".cart-section").insertAdjacentHTML("afterbegin",'\n        <div class = "empty-cart-info">\n        <p class="simply-text">В корзине пока пусто...</p>\n        <a class="simply-link right-margin-20" href = "/">На главную</a>\n        <a class="simply-link" href = "/catalog">В каталог</a>\n        </div>\n    ')};export function make_array(e){let t=[],r={};return e.forEach(e=>{(r={}).id=e.id,r.amount=e.amount,r.price=getFinalPrice(e.price,e.sale),t.push(r)}),t};export function returnCartValues(){let e=JSON.parse(localStorage.getItem("order"))||[],t=0,r=0;for(let o=0;o<e.length;o++)t+=e[o].amount*e[o].price,r+=e[o].amount;r>0?document.querySelector(".cart-block").classList.add("active"):document.querySelector(".cart-block").classList.remove("active"),document.querySelector(".cart-num").innerText=r,document.querySelector(".cart-price-text").innerText=returnCorrectWord(r),document.querySelector(".cart-price-value").innerText=t.toLocaleString(),document.querySelector(".common-title-bold")&&(document.querySelector(".common-title-bold").innerText=r+" "+returnCorrectWord(r)),document.getElementById("final-price")&&(document.getElementById("final-price").innerText=t.toLocaleString()+" ₽"),document.getElementById("final-price")&&document.getElementById("final-price").setAttribute("data-price",t),document.querySelector(".cart-block").classList.add("visible")};export function plusToCart(e,t=1){let r=JSON.parse(localStorage.getItem("order"));if(!r||null==r)return!1;for(let o=0;o<r.length;o++)if(r[o].id==e){r[o].amount=parseInt(r[o].amount)+t;break}return localStorage.setItem("order",JSON.stringify(r)),!0};export function minusToCart(e,t=1){let r=JSON.parse(localStorage.getItem("order"));if(!r||null==r)return!1;for(let o=0;o<r.length;o++)if(r[o].id==e){r[o].amount-=t;break}return localStorage.setItem("order",JSON.stringify(r)),!0};export function findParent(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e};export function body_lock(){let e=document.body;if(!e.classList.contains("scroll-locked")){let t=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;document.querySelector(".nav").classList.contains("nav-static")&&document.querySelector(".nav").classList.add("nav-static-temporary"),e.classList.add("scroll-locked"),e.style.top="-"+t+"px",e.setAttribute("data-popup-scrolltop",t)}};export function body_unlock(){let e=document.body;if(e.classList.contains("scroll-locked")){let t=document.body.getAttribute("data-popup-scrolltop");document.querySelector(".nav").classList.contains("nav-static-temporary")&&document.querySelector(".nav").classList.remove("nav-static-temporary"),e.classList.remove("scroll-locked"),e.style.top="",e.removeAttribute("data-popup-scrolltop"),window.scrollTo(0,t)}};