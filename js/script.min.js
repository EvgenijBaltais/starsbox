import{getFinalPrice,getFinalPriceDecorated,countProductsAmount,returnCorrectWord,countFinalSumm,emptyCartInfo,make_array,returnCartValues,findParent,plusToCart,minusToCart,body_lock,body_unlock}from"./functions.min.js";function getClickedElementIndex(e){for(let t=0;t<e.length;t++)if(event.target==e[t])return t}async function sendCommentData(e,t,r){let a=await fetch(t,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:e});return a.ok?(r.innerText="Успешно!",setTimeout(()=>{r.innerText="Отправить!",r.classList.remove("blocked")},8e3),ym(95872157,"reachGoal","send_review"),"Успешно"):a.ok?void 0:(r.innerText="Ошибка!",setTimeout(()=>{r.innerText="Отправить!",r.classList.remove("blocked")},8e3),"Ошибка")}async function sendForm(e,t,r){let a=await fetch(t,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:e}),n=await a;return n.ok?(r.innerText="Успешно!",setTimeout(()=>{r.innerText="Отправить!",r.classList.remove("blocked")},8e3),"Успешно"):n.ok?void 0:(r.innerText="Ошибка!",setTimeout(()=>{r.innerText="Отправить!",r.classList.remove("blocked")},8e3),"Ошибка")}function addToCart(e,t,r){let a=JSON.parse(localStorage.getItem("order"));if(a&&null!=a){let n=0;for(let o=0;o<a.length;o++)if(a[o].id==e){a[o].amount+=parseInt(t),a[o].price=parseInt(r),n=1;break}return!n&&a.push({id:e,amount:parseInt(t),price:parseInt(r)}),localStorage.setItem("order",JSON.stringify(a)),!1}return(a=[]).push({id:e,amount:parseInt(t),price:parseInt(r)}),localStorage.setItem("order",JSON.stringify(a)),!1}function productInCart(e){let t=JSON.parse(localStorage.getItem("order")),r=!1;if(t&&null!=t)for(let a=0;a<t.length;a++)if(t[a].id==e){r=t[a];break}return r}function cartAddNotification(e){document.querySelector(".cart-warnings").insertAdjacentHTML("afterbegin",`\n        <div class="cart-add-warning">${e}</div>\n        `),setTimeout(()=>{document.querySelectorAll(".cart-add-warning")[document.querySelectorAll(".cart-add-warning").length-1].remove()},1e3)}document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector(".main-page-header")&&window.screen.width<650){let e=.01*window.innerHeight;document.querySelector(".main-page-screen").style.setProperty("--vh",`${e}px`),window.addEventListener("resize",()=>{document.querySelector(".main-page-screen").style.setProperty("--vh",`${e}px`)})}if(document.querySelector(".main-page-header")&&setTimeout(()=>{window.pageYOffset>5&&document.querySelector(".nav").classList.add("nav-static")},50),document.body.style.opacity=1,document.querySelector(".menu-area-w").addEventListener("click",()=>{let e=event.target.parentElement;e.parentElement.querySelector(".menu-icon").classList.contains("open")?(setTimeout(()=>{document.querySelector(".nav-list").style.opacity=0,e.parentElement.querySelector(".menu-icon").classList.remove("open")},0),setTimeout(()=>{document.querySelector(".nav-list").removeAttribute("style")},150)):(setTimeout(()=>{document.querySelector(".nav-list").style.display="block",e.parentElement.querySelector(".menu-icon").classList.add("open")},0),setTimeout(()=>{document.querySelector(".nav-list").style.opacity=1},10))}),function(){if(!document.querySelector(".order-form"))return!1;new Inputmask("+7 (999) 999-99-99").mask(document.querySelector(".form-order-input-phone")),document.querySelector(".form-order-btn").addEventListener("click",()=>{let e=0,t=findParent(event.target,"order-form"),r=t.querySelector('input[name="name"]').value,a=t.querySelector('input[name="email"]').value,n=t.querySelector('input[name="phone"]').value,o=t.querySelector("textarea"),c="name="+r+"&email="+a+"&phone="+n,i=event.target;return!i.classList.contains("blocked")&&((""==o.value||o.value.length<3)&&(o.style.border="2px solid red",setTimeout(()=>{o.removeAttribute("style")},1e3),e+=1),t.querySelector('input[name="phone"]').inputmask.isComplete()||(t.querySelector('input[name="phone"]').style.border="2px solid red",setTimeout(()=>{t.querySelector('input[name="phone"]').removeAttribute("style")},1e3),e+=1),!e&&(i.classList.add("blocked"),i.innerText="Отправка...",t.querySelectorAll('input[name="radio"]').forEach(e=>{e.checked&&(c+="&type_of_connect="+e.parentElement.querySelector("span").innerText)}),t.querySelectorAll('input[name="radio-2"]').forEach(e=>{e.checked&&(c+="&type_of_call="+e.parentElement.querySelector("span").innerText)}),void sendForm(c+="&comment="+o.value,"/libs/send-contacts-form.php",i).then(e=>{try{ym(95872157,"reachGoal","contacts_send")}catch(e){}})))}),document.querySelector(".form-order-input-phone").addEventListener("click",()=>{event.target.style="border-color: rgb(179,147,121)"}),document.querySelector(".form-order-input-phone").addEventListener("input",()=>{event.target.style="border-color: rgb(179,147,121)"})}(),document.querySelectorAll(".scroll-to").length&&document.querySelectorAll(".scroll-to").forEach(e=>{e.addEventListener("click",()=>{event.preventDefault(),window.scrollTo({top:document.getElementById(e.getAttribute("data-scroll-to")).offsetTop,behavior:"smooth"})})}),window.screen.width>649||document.querySelector(".main-page-header")){let e=0;document.addEventListener("scroll",()=>{window.pageYOffset>5&&e?document.querySelector(".nav").classList.add("nav-static"):document.querySelector(".nav").classList.remove("nav-static"),e=1})}document.body.addEventListener("click",()=>{try{event.target.classList.contains("top-contact-link-telegramm")&&ym(95872157,"reachGoal","top_telegram"),event.target.classList.contains("top-contact-link-whatsapp")&&ym(95872157,"reachGoal","top_wa"),event.target.classList.contains("top-contact-link-chat")&&ym(95872157,"reachGoal","top_chat"),event.target.classList.contains("footer-contact-link-telegramm")&&ym(95872157,"reachGoal","bottom_telegram"),event.target.classList.contains("footer-contact-link-whatsapp")&&ym(95872157,"reachGoal","bottom_wa"),event.target.classList.contains("footer-contact-link-chat")&&ym(95872157,"reachGoal","bottom_chat")}catch(e){}(()=>{if(!document.querySelector(".item-amount-plus")||!document.querySelector(".item-amount-minus"))return!1;if(event.target.classList.contains("item-amount-minus")){let e=findParent(event.target,"product-card"),t=e.querySelector(".item-amount-value");if(t.value<=1)return!1;t.value=+t.value-1,e.classList.contains("item-in-cart")&&(minusToCart(e.getAttribute("data-id")),returnCartValues(),cartAddNotification("\n                            -1 шт удален из заказа\n                            "))}if(event.target.classList.contains("item-amount-plus")){let e=findParent(event.target,"product-card"),t=e.querySelector(".item-amount-value");if(t.value>=99)return!1;t.value=+t.value+1,e.classList.contains("item-in-cart")&&(plusToCart(e.getAttribute("data-id")),returnCartValues(),cartAddNotification("\n                            +1 шт добавлен к заказу\n                            "))}})(),(()=>{if(!document.querySelector(".amount-select-minus")||!document.querySelector(".amount-select-plus"))return!1;if(event.target.classList.contains("amount-select-minus")){let e=findParent(event.target,"product-description"),t=e.querySelector(".amount-select-value");if(t.value<=1)return!1;t.value=+t.value-1,e.querySelector(".product-item-add-cart").classList.contains("added-to-cart-w")&&(minusToCart(e.querySelector(".order-button-cart").getAttribute("data-id")),returnCartValues(),cartAddNotification("\n                                -1 шт удален из заказа\n                                "))}if(event.target.classList.contains("amount-select-plus")){let e=findParent(event.target,"product-description"),t=e.querySelector(".amount-select-value");if(t.value>=99)return!1;t.value=+t.value+1,e.querySelector(".product-item-add-cart").classList.contains("added-to-cart-w")&&(plusToCart(e.querySelector(".order-button-cart").getAttribute("data-id")),returnCartValues(),cartAddNotification("\n                                +1 шт добавлен к заказу\n                                "))}})()}),function(){if(!document.querySelector(".order-button-cart"))return!1;let e=document.querySelector(".order-button-cart");productInCart(e.getAttribute("data-id"))&&(e.innerText="",e.classList.add("added-to-cart"),document.querySelector(".product-item-add-cart").classList.add("added-to-cart-w"),e.insertAdjacentHTML("beforeend",'<a href = "/cart" class = "order-button-cart-link">Товар в корзине. Перейти →</a>'),document.querySelector(".amount-select-value").setAttribute("value",productInCart(e.getAttribute("data-id")).amount)),productInCart(e.getAttribute("data-id"))||document.querySelector(".order-button-cart").addEventListener("click",()=>{if(event.target.classList.contains("added-to-cart"))return!1;e.innerText="",e.classList.add("added-to-cart"),document.querySelector(".product-item-add-cart").classList.add("added-to-cart-w"),e.insertAdjacentHTML("beforeend",'<a href = "/cart" class = "order-button-cart-link">Товар в корзине. Перейти →</a>'),addToCart(event.target.getAttribute("data-id"),document.querySelector(".amount-select-value").value,event.target.getAttribute("data-price")),returnCartValues(),cartAddNotification("Товар добавлен в корзину!")})}(),function(){let e=document.querySelectorAll(".product-card"),t=document.querySelectorAll(".filter-item:not(.all-filter-item)"),r=document.querySelectorAll(".filters-brand-item"),a=document.querySelectorAll(".filters-weight-item");if(0==e.length||0==t.length)return!1;function n(e,t=[],r=[]){e.forEach(e=>{if(t.length||r.length)if(e.classList.add("hidden"),t.length){if(t.includes(e.getAttribute("data-brand"))&&e.classList.remove("hidden"),!r.length)return;t.includes(e.getAttribute("data-brand"))&&r.includes(e.getAttribute("data-weight"))?e.classList.remove("hidden"):e.classList.add("hidden")}else!t.length&&r.includes(e.getAttribute("data-weight"))&&e.classList.remove("hidden");else e.classList.remove("hidden")})}r.forEach(t=>{t.addEventListener("click",()=>{event.target.classList.contains("active")?event.target.classList.remove("active"):event.target.classList.add("active");let t=[],o=[];r.forEach(e=>{e.classList.contains("active")&&t.push(e.getAttribute("data-brand"))}),a.forEach(e=>{e.classList.contains("active")&&o.push(e.getAttribute("data-weight"))}),t.length?event.target.parentElement.querySelector(".filter-item").classList.remove("active"):event.target.parentElement.querySelector(".filter-item").classList.add("active"),n(e,t,o),document.querySelectorAll(".assortment-item:not(.hidden)").length?document.querySelector(".no-products-warning").innerText="":document.querySelector(".no-products-warning").innerText="Ничего не нашлось..."})}),a.forEach(t=>{t.addEventListener("click",()=>{event.target.classList.contains("active")?event.target.classList.remove("active"):event.target.classList.add("active");let t=[],o=[];r.forEach(e=>{e.classList.contains("active")&&t.push(e.getAttribute("data-brand"))}),a.forEach(e=>{e.classList.contains("active")&&o.push(e.getAttribute("data-weight"))}),o.length?event.target.parentElement.querySelector(".filter-item").classList.remove("active"):event.target.parentElement.querySelector(".filter-item").classList.add("active"),n(e,t,o),document.querySelectorAll(".assortment-item:not(.hidden)").length?document.querySelector(".no-products-warning").innerText="":document.querySelector(".no-products-warning").innerText="Ничего не нашлось..."})}),document.querySelectorAll(".all-filter-item").forEach((t,o)=>{t.addEventListener("click",()=>{let t=[],c=[];1==o&&r.forEach(e=>{e.classList.contains("active")&&t.push(e.getAttribute("data-brand"))}),0==o&&a.forEach(e=>{e.classList.contains("active")&&c.push(e.getAttribute("data-weight"))}),event.target.parentElement.querySelectorAll(".filter-item").forEach((e,t)=>{0==t?e.classList.add("active"):e.classList.remove("active")}),n(e,t,c)})}),document.querySelector(".clear-filters").addEventListener("click",()=>{filters.forEach(e=>{e.classList.remove("active")}),e.forEach(e=>{e.classList.remove("hidden")});let t=new URL(location);t.searchParams.delete("weight"),t.searchParams.delete("brand"),history.pushState({},"",t)})}(),returnCartValues(),document.querySelectorAll(".product-card").forEach(e=>{let t=JSON.parse(localStorage.getItem("order"));if(t&&null!=t)for(let r=0;r<t.length;r++)t[r].id==e.getAttribute("data-id")&&(e.classList.add("item-in-cart"),e.querySelector(".item-order-btn").innerText="",e.querySelector(".item-amount-value").value=t[r].amount,e.querySelector(".item-order-btn").insertAdjacentHTML("beforeend",'<a href = "/cart">В корзине →</a>'))}),document.querySelectorAll(".item-order-btn")&&document.querySelectorAll(".item-order-btn").forEach(e=>{e.addEventListener("click",()=>{let e=findParent(event.target,"product-card");if(!e.getAttribute("data-id"))return!1;if(!e.classList.contains("item-in-cart")){e.classList.add("item-in-cart"),addToCart(e.getAttribute("data-id"),e.querySelector(".item-amount-value").value,e.getAttribute("data-price")),cartAddNotification("Товар добавлен в корзину!"),returnCartValues(),event.target.innerText="",event.target.insertAdjacentHTML("beforeend",'<a href = "/cart">В корзине →</a>');try{ym(95872157,"reachGoal","order_button_cart")}catch(e){}return!1}})}),(()=>{setTimeout(()=>{})})()}),document.querySelector(".subscribe-email-button")&&document.querySelector(".subscribe-email-button").addEventListener("click",()=>{let e=event.target,t="";if(-1==e.parentElement.querySelector(".subscribe-email").value.indexOf("@"))return e.parentElement.querySelector(".subscribe-email").classList.add("subscribe-email-wrong"),setTimeout(()=>{e.parentElement.querySelector(".subscribe-email").classList.remove("subscribe-email-wrong")},1e3),!1;sendForm(t+="email="+e.parentElement.querySelector(".subscribe-email").value,"/libs/subscribe_emails.php",e).then(e=>{try{ym(95872157,"reachGoal","email_subscribe")}catch(e){}})}),document.querySelector(".reviews-form-send")&&(document.querySelector(".reviews-form-send").addEventListener("click",()=>{event.preventDefault();let e=event.target.parentElement,t=e.querySelector('input[name="name"]').value,r=e.querySelector('input[name="email"]').value,a=e.querySelector("textarea"),n="name="+t+"&email="+r,o=event.target;return!o.classList.contains("blocked")&&(""==a.value||a.value.length<3?(a.style.outline="1px solid red",setTimeout(()=>{a.removeAttribute("style")},1e3),!1):e.querySelector(".checkbox").checked?(o.classList.add("blocked"),o.innerText="Отправка..",void sendCommentData(n+="&comment="+a.value,"/libs/send-comment.php",o).then(e=>{try{ym(95872157,"reachGoal","any_wishes")}catch(e){}})):(e.querySelector(".agree-text").style.color="red",!1))}),document.getElementById("checkbox").addEventListener("change",()=>{document.querySelector(".agree-text").style.color="black"}));